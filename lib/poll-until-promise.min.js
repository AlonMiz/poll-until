!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("poll-until-promise",[],e):"object"==typeof exports?exports["poll-until-promise"]=e():t["poll-until-promise"]=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";t.exports=n(1)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u={NOT_FUNCTION:"Your executor is not a function. functions and promises are valid."},s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this._interval=e.interval||1e3,this._timeout=e.timeout||2e4,this._stopOnFailure=e.stopOnFailure||!1,this._isWaiting=!1,this._isResolved=!1}return r(t,[{key:"tryEvery",value:function(t){return this._interval=t,this}},{key:"stopAfter",value:function(t){return this._timeout=t,this}},{key:"execute",value:function(t){var e=this;return this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),this._executeFn=t,this._validateExecution(),this.start=Date.now(),this._isWaiting=!0,this._runFunction(),this.promise}},{key:"getPromise",value:function(){return this.promise}},{key:"isResolved",value:function(){return this._isResolved}},{key:"isWaiting",value:function(){return this._isWaiting}},{key:"stopOnFailure",value:function(t){return this._stopOnFailure=t,this}},{key:"_validateExecution",value:function(){if("function"!=typeof this._executeFn)throw new Error(u.NOT_FUNCTION)}},{key:"_timeFromStart",value:function(){return Date.now()-this.start}},{key:"_shouldStopTrying",value:function(){return this._timeFromStart()>this._timeout}},{key:"_executeAgain",value:function(){var t=this;setTimeout(function(){t._runFunction()},this._interval)}},{key:"_runFunction",value:function(){var t=this;if(this._shouldStopTrying())return this._isWaiting=!1,void this.reject("Failed to wait");var e=this._executeFn();"object"===(void 0===e?"undefined":o(e))&&"function"==typeof e.then||(e=new Promise(function(t){return t(e)})),e.then(function(e){if(e)return t.resolve(e),t._isWaiting=!1,void(t._isResolved=!0);t._executeAgain()}).catch(function(e){return t._stopOnFailure?t.reject(e):t._executeAgain()})}}]),t}();t.exports=s}])});